//===-- A64ISelDAGToDAG.cpp - A dag to dag inst selector for A64 ---------===//
//
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//
//
// This file defines an instruction selector for the A64 target.
//
//===----------------------------------------------------------------------===//

#include "A64.h"
#include "A64TargetMachine.h"
#include "llvm/CodeGen/SelectionDAGISel.h"

using namespace llvm;

#define DEBUG_TYPE "a64-isel"

//===--------------------------------------------------------------------===//
/// A64DAGToDAGISel - A64 specific code to select A64 machine
/// instructions for SelectionDAG operations.
///
namespace {

class A64DAGToDAGISel : public SelectionDAGISel {

public:
  explicit A64DAGToDAGISel(A64TargetMachine &tm, CodeGenOpt::Level OptLevel)
      : SelectionDAGISel(tm, OptLevel) {}

  void Select(SDNode *Node) override;

  StringRef getPassName() const override {
    return "A64 DAG -> DAG Pattern Instruction Selection";
  }

  // Autogenerated from target description
#include "A64GenDAGISel.inc"

};
} // End anonymous namespace

void A64DAGToDAGISel::Select(SDNode *Node) {
  // Forward to generated function.
  SelectCode(Node);
}

/// createA64ISelDag - This pass converts a legalized DAG into a
/// A64-specific DAG, ready for instruction scheduling.
FunctionPass *llvm::createA64ISelDag(A64TargetMachine &TM,
                                     CodeGenOpt::Level OptLevel) {
  return new A64DAGToDAGISel(TM, OptLevel);
}
